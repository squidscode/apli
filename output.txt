Finished lexing! 1/15
Finished lexing! 2/15
Finished lexing! 3/15
Finished lexing! 4/15
Finished lexing! 5/15
Finished lexing! 6/15
Finished lexing! 7/15
Finished lexing! 8/15
Finished lexing! 9/15
Finished lexing! 10/15
Finished lexing! 11/15
Finished lexing! 12/15
Finished lexing! 13/15
Finished lexing! 14/15
Finished lexing! 15/15
[38;2;0;175;175;1m#include[0m [34;1m"regex.h"[0m
[38;2;0;175;175;1m#include[0m [34;1m"dfa.h"[0m
[38;2;0;175;175;1m#include[0m [34;1m"nfa.h"[0m
[38;2;0;175;175;1m#include[0m[38;2;0;100;250;1m <[0m[38;2;255;165;0;1mstdio[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mh[0m>

[38;2;255;50;0;1minit_regex[0m[32;1m([0m[32;1m)[0m;
[38;2;255;50;0;1mdefine_list[0m[32;1m([0m[38;2;255;165;0;1m_regex_match_t[0m[32;1m)[0m;

[38;2;100;100;100;1m// Have the chunk size start at 500, but eventually narrow down using the MLE of the exponential pdf function:
[0m[38;2;100;100;100;1m// MLE = (n - 2) / SUM(X)
[0m[38;2;0;175;175;1m#define[0m [38;2;255;165;0;1mCHUNK_SIZE[0m  [32;1m([0m15[32;1m)[0m
[38;2;0;175;175;1m#define[0m [38;2;255;50;0;1mmax[0m[32;1m([0m[38;2;255;165;0;1mx[0m,[38;2;255;165;0;1my[0m[32;1m)[0m    [32;1m([0m[32;1m([0m[32;1m([0m[38;2;255;165;0;1mx[0m[32;1m)[0m[38;2;0;100;250;1m <[0m [32;1m([0m[38;2;255;165;0;1my[0m[32;1m)[0m[32;1m)[0m ? [32;1m([0m[38;2;255;165;0;1my[0m[32;1m)[0m : [32;1m([0m[38;2;255;165;0;1mx[0m[32;1m)[0m[32;1m)[0m

[38;2;0;175;175;1mtypedef[0m [38;2;255;165;0;1menum[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mRAW_LOADED[0m, [38;2;255;165;0;1mCOMPILED[0m[38;2;0;100;100;1m}[0m [38;2;255;165;0;1m_regex_state_type[0m;
[38;2;255;165;0;1mstruct[0m [38;2;255;165;0;1m_regex_[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1m_regex_state_type[0m [38;2;255;165;0;1mstate[0m;
    [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mraw_regex[0m;
    [38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m;
    [38;2;255;50;0;1mFdfa[0m[32;1m([0m[38;2;255;165;0;1msize_t_set_ptr_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mfdfa[0m;
[38;2;0;100;100;1m}[0m;

[38;2;255;165;0;1m_regex_t[0m* [38;2;255;50;0;1m_regex_from[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mstr[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstr_size[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;50;175;0;1mchar[0m *[38;2;255;165;0;1mbuf[0m[38;2;0;100;250;1m =[0m [32;1m([0m[38;2;50;175;0;1mchar[0m*[32;1m)[0m [38;2;255;50;0;1mmalloc[0m[32;1m([0m[38;2;255;165;0;1mstr_size[0m * [38;2;255;50;0;1msizeof[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
    [38;2;255;50;0;1mstrcpy[0m[32;1m([0m[38;2;255;165;0;1mbuf[0m, [38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mnew_regex[0m[38;2;0;100;250;1m =[0m [32;1m([0m[38;2;255;165;0;1m_regex_t[0m*[32;1m)[0m [38;2;255;50;0;1mmalloc[0m[32;1m([0m[38;2;255;50;0;1msizeof[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m[32;1m)[0m[32;1m)[0m;
    [38;2;255;165;0;1mnew_regex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mstate[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mRAW_LOADED[0m;
    [38;2;255;165;0;1mnew_regex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mraw_regex[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbuf[0m;
    [38;2;255;165;0;1mnew_regex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mNULL[0m;
    [38;2;255;165;0;1mnew_regex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mNULL[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mnew_regex[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m/* _regex_string_segment is used for tokenizing in the regex_parse functions. */[0m
[38;2;0;175;175;1mtypedef[0m [38;2;255;165;0;1mstruct[0m [38;2;255;165;0;1m_regex_string_segment_[0m [38;2;0;100;100;1m{[0m
    [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mptr[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mlength[0m;
[38;2;0;100;100;1m}[0m [38;2;255;165;0;1m_regex_string_segment_t[0m;
[38;2;255;50;0;1mdefine_list[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m;

[38;2;100;100;100;1m/* Forward declarations for the _regex_compile function */[0m
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_parse[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m*, [38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mconst char[0m*, [38;2;50;175;0;1msize_t[0m[32;1m)[0m;
[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_split_by_capturing_groups[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[32;1m)[0m;
[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_split_by_tokens[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[32;1m)[0m;
[38;2;100;100;100;1m/* NOTE: The interval is defined as [start, end). The character at ptr[end] is not counted. */[0m
[38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m;
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m*, [38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mconst char[0m*, [38;2;50;175;0;1msize_t[0m[32;1m)[0m;
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand_with_root_tokens[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m*, [38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mconst char[0m*, [38;2;50;175;0;1msize_t[0m[32;1m)[0m;
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m*, [38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mconst char[0m*, [38;2;50;175;0;1msize_t[0m[32;1m)[0m;
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m*, [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1msegment[0m[32;1m)[0m;
[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_is_special_character[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_add_all_alphabet_transitions_between[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstate[0m1, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstate[0m2[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_debug_print_regex_string_segment_t[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mrss[0m[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_root_at_start_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_non_root_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mtokens[0m,
    [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_root_at_end_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m;
[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_process_repeat_token[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mfrom[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mto[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m;

[38;2;100;100;100;1m// The alphabet set is global, and I know this is bad design, but it's not `extern' so it's fine! (irony)
[0m[38;2;255;50;0;1mSet[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1malphabet[0m;

[38;2;255;165;0;1m_regex_t[0m* [38;2;255;50;0;1m_regex_compile[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mregex_size[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mraw_regex[0m[32;1m)[0m;
    [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mnfa_new[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m, 0[32;1m)[0m;
    [38;2;255;165;0;1malphabet[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mset_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1mint[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m 256; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mset_insert[0m[32;1m([0m[38;2;255;165;0;1malphabet[0m, [38;2;255;165;0;1mi[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_parse[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m, 0, [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mraw_regex[0m, [38;2;255;165;0;1mregex_size[0m[32;1m)[0m;
    [38;2;100;100;100;1m// printf("start : %zu\nend : %zu\n", 0UL, end);
[0m    [38;2;255;50;0;1mnfa_add_accept_state[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;255;50;0;1mDfa[0m[32;1m([0m[38;2;255;165;0;1msize_t_set_ptr_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mdfa[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mnfa_to_dfa[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1malphabet[0m[32;1m)[0m;
    [38;2;100;100;100;1m// printf("# of dfa transitions: %zu\n", map_size(dfa->transition_map));
[0m    [38;2;255;50;0;1mset_free[0m[32;1m([0m[38;2;255;165;0;1malphabet[0m[32;1m)[0m;
    [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mdfa_to_fdfa[0m[32;1m([0m[38;2;255;165;0;1mdfa[0m[32;1m)[0m;
    [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mstate[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mCOMPILED[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mregex[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m/* TODO the following:
 * - add '^' and '$' special characters
 * - parse '{}' family correctly.
 * - compress the final dfa created AND free the original set nfa.
 */[0m

[38;2;100;100;100;1m// IF begin_expansion_state == 0, then _regex_expand_with_root_tokens is called, otherwise, _regex_expand is called.
[0m[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_parse[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mbegin_expansion_state[0m,
    [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mcapturing_groups[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_split_by_capturing_groups[0m[32;1m([0m[38;2;255;165;0;1mraw_regex[0m, [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m *[38;2;255;165;0;1mcapturing_groups_ends[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m;
    [38;2;100;100;100;1m// printf("capturing groups size : %zu\n", list_size(capturing_groups));
[0m    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m - [0m1;
    [38;2;100;100;100;1m// Using a function pointer here means no 'if' statement inside the while loop. This is faster.
[0m    [38;2;100;100;100;1m// printf("begin_expansion_state: %zu\n", begin_expansion_state);
[0m    [38;2;255;165;0;1m__auto_type[0m [38;2;255;165;0;1mfn[0m[38;2;0;100;250;1m =[0m [32;1m([0m0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mbegin_expansion_state[0m[32;1m)[0m ? &[38;2;255;165;0;1m_regex_expand_with_root_tokens[0m : &[38;2;255;165;0;1m_regex_expand[0m;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups[0m[32;1m)[0m;
        [38;2;255;50;0;1m_debug_print_regex_string_segment_t[0m[32;1m([0m[38;2;255;165;0;1msegment[0m[32;1m)[0m;
        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mnext_start[0m[32;1m)[0m;
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups_ends[0m,
            [32;1m([0m[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mfn[0m[32;1m)[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mnext_start[0m, [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m;
        [38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m + [0m1;
        [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mend[0m [38;2;0;100;250;1m+=[0m 1; [38;2;100;100;100;1m/* this value now reprents the "end state" of the list of capturing groups. */[0m
    [38;2;0;175;175;1mwhile[0m[32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups_ends[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups_ends[0m[32;1m)[0m, [38;2;255;165;0;1mend[0m[32;1m)[0m;
        [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups_ends[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups[0m[32;1m)[0m;
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mcapturing_groups_ends[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mend[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m/* Invariant: 0 < list_size(groups) */[0m
[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_split_by_capturing_groups[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mgroups[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mparen_level[0m[38;2;0;100;250;1m =[0m 0;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m 0;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1msize[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mif[0m[32;1m([0m'\\'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mi[0m [38;2;0;100;250;1m+=[0m 1; [38;2;100;100;100;1m// ignore the next character ALWAYS!
[0m            [38;2;255;165;0;1mcontinue[0m;
        [38;2;0;100;100;1m}[0m
        [38;2;255;50;0;1mif[0m[32;1m([0m'[32;1m([0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m
            [38;2;255;165;0;1mparen_level[0m [38;2;0;100;250;1m+=[0m 1;
        [38;2;255;50;0;1mif[0m[32;1m([0m'[32;1m)[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m
            [38;2;255;165;0;1mparen_level[0m [38;2;0;100;250;1m-=[0m 1;
        [38;2;255;50;0;1mif[0m[32;1m([0m'|'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mgroups[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m
        [38;2;255;165;0;1mif[0m [32;1m([0m0[38;2;0;100;250;1m >[0m [38;2;255;165;0;1mparen_level[0m[32;1m)[0m
            [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"Incorrectly formatted regex: '(' and ')' tokens are badly-formed."[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mparen_level[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"Incorrectly formatted regex: '(' and ')' tokens are badly-formed."[0m[32;1m)[0m;
    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1msize[0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mcapture_group_begin_offset[0m[32;1m)[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mgroups[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1msize[0m[32;1m)[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mgroups[0m;
[38;2;0;100;100;1m}[0m

[38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m&[38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mstart[0m[31;1m][0m, [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mstart[0m[38;2;0;100;100;1m}[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1msegment[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mstr[0m, [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1msegment[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m
        [38;2;0;175;175;1mreturn[0m 0;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1mint[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m
        [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1msegment[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m
            [38;2;0;175;175;1mreturn[0m 0;
    [38;2;0;175;175;1mreturn[0m 1;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m// WITH ROOT TOKENS (^ and $)
[0m[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand_with_root_tokens[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;100;100;100;1m/* the raw_regex string must not have multiple segments (ie. there are no level 0 alternation signs). */[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mtokens[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_split_by_tokens[0m[32;1m([0m[38;2;255;165;0;1mraw_regex[0m, [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m - [0m1;
    [38;2;100;100;100;1m/* The regex token parser uses 1 look-ahead. */[0m
    [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
    [38;2;100;100;100;1m// printf("[expand]: "); _debug_print_regex_string_segment_t(current);
[0m    [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
    [38;2;255;50;0;1m_regex_expand_root_at_start_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, &[38;2;255;165;0;1mcurrent[0m, &[38;2;255;165;0;1mnext_start[0m, &[38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"^"[0m, [38;2;255;165;0;1mcurrent[0m[32;1m)[0m[32;1m)[0m
        [32;1m([0m[38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m, [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m[32;1m)[0m;
    [38;2;255;50;0;1m_regex_expand_non_root_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mtokens[0m, &[38;2;255;165;0;1mcurrent[0m, &[38;2;255;165;0;1mnext_start[0m, &[38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;255;50;0;1m_regex_expand_root_at_end_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, &[38;2;255;165;0;1mcurrent[0m, &[38;2;255;165;0;1mnext_start[0m, &[38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mend[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m// WITHOUT ROOT TOKENS.
[0m[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;100;100;100;1m/* the raw_regex string must not have multiple segments (ie. there are no level 0 alternation signs). */[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mtokens[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_split_by_tokens[0m[32;1m([0m[38;2;255;165;0;1mraw_regex[0m, [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m - [0m1;
    [38;2;100;100;100;1m/* The regex token parser uses 1 look-ahead. */[0m
    [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
    [38;2;100;100;100;1m// printf("[expand]: "); _debug_print_regex_string_segment_t(current);
[0m    [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
    [38;2;255;50;0;1m_regex_expand_non_root_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mtokens[0m, &[38;2;255;165;0;1mcurrent[0m, &[38;2;255;165;0;1mnext_start[0m, &[38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mend[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_root_at_start_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m![38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"^"[0m, *[38;2;255;165;0;1mcurrent[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m [38;2;100;100;100;1m// if NOT rooted to the beginning
[0m        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;50;0;1m_regex_add_all_alphabet_transitions_between[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m2[32;1m)[0m;
        *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m2;
        *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mnext_start[0m;
    [38;2;0;100;100;1m}[0m
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_non_root_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mtokens[0m,
    [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;0;175;175;1mwhile[0m [32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
        [38;2;100;100;100;1m// printf("[expand]: "); _debug_print_regex_string_segment_t(next);
[0m        [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;50;0;1m_regex_is_special_character[0m[32;1m([0m*[38;2;255;165;0;1mcurrent[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;100;100;100;1m// do nothing
[0m        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"*"[0m, [38;2;255;165;0;1mnext[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"?"[0m, [38;2;255;165;0;1mnext[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"+"[0m, [38;2;255;165;0;1mnext[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
            *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m && '[38;2;0;100;100;1m{[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m0[31;1m][0m && '[38;2;0;100;100;1m}[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mfrom[0m[38;2;0;100;250;1m =[0m 0; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mto[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mfrom[0m [38;2;0;100;250;1m-=[0m 1; [38;2;255;165;0;1mto[0m [38;2;0;100;250;1m-=[0m 1; [38;2;100;100;100;1m// setup
[0m            [38;2;255;50;0;1m_regex_process_repeat_token[0m[32;1m([0m&[38;2;255;165;0;1mfrom[0m, &[38;2;255;165;0;1mto[0m, [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mnext[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
            [38;2;100;100;100;1m// printf("from: %zu, to: %zu\n", from, to);
[0m            [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
            *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
            [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mfrom[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
                *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, *[38;2;255;165;0;1mnext_start[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
                *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mend[0m;
            [38;2;0;100;100;1m}[0m
            [38;2;255;165;0;1mif[0m [32;1m([0m0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mto[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m [38;2;0;100;100;1m{[0m
                [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
                *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
                [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m *[38;2;255;165;0;1mlist_of_ends[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m;
                [38;2;255;50;0;1mlist_push_front[0m[32;1m([0m[38;2;255;165;0;1mlist_of_ends[0m, *[38;2;255;165;0;1mnext_start[0m[32;1m)[0m;
                [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mfrom[0m; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mto[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
                    *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, *[38;2;255;165;0;1mnext_start[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
                    [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mlist_of_ends[0m, *[38;2;255;165;0;1mend[0m[32;1m)[0m;
                    *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mend[0m;
                [38;2;0;100;100;1m}[0m
                *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m + [0m1;
                [38;2;0;175;175;1mwhile[0m[32;1m([0m[38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1mlist_of_ends[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
                    [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mlist_of_ends[0m[32;1m)[0m, *[38;2;255;165;0;1mend[0m[32;1m)[0m;
                    [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mlist_of_ends[0m[32;1m)[0m;
                [38;2;0;100;100;1m}[0m
            [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;0;100;100;1m{[0m [38;2;100;100;100;1m// the '*' expansion:
[0m                [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1[32;1m)[0m;
                *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m+1, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
                [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
                [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
                [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m+1[32;1m)[0m;
                *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m + [0m1;
            [38;2;0;100;100;1m}[0m
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;0;100;100;1m{[0m
            [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
        [38;2;0;100;100;1m}[0m
        *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m;
        *[38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mnext[0m;
        [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m![38;2;255;50;0;1m_regex_is_special_character[0m[32;1m([0m*[38;2;255;165;0;1mcurrent[0m[32;1m)[0m 
     && ![38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"$"[0m, *[38;2;255;165;0;1mcurrent[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m [38;2;100;100;100;1m// NOT a special character and not '$'
[0m        [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [32;1m([0m*[38;2;255;165;0;1mnext_start[0m[32;1m)[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcurrent[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mlength[0m[32;1m)[0m;
        *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m [32;1m([0m*[38;2;255;165;0;1mend[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_process_repeat_token[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mfrom[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mto[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;50;175;0;1mchar[0m [38;2;255;165;0;1mbuf[0m[31;1m[[0m10[31;1m][0m; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mind[0m[38;2;0;100;250;1m =[0m 1;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1 && ',' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m[32;1m)[0m 
        [32;1m([0m[38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m, [38;2;255;165;0;1mind[0m [38;2;0;100;250;1m+=[0m 1[32;1m)[0m;
    [38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[38;2;0;100;250;1m =[0m '\0';
    [38;2;255;50;0;1massert[0m[32;1m([0m0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m1[32;1m)[0m; [38;2;100;100;100;1m// needs to have a size greater than 0.
[0m    [38;2;255;50;0;1massert[0m[32;1m([0m0 [38;2;0;100;250;1m!=[0m [32;1m([0m*[38;2;255;165;0;1mfrom[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1matoi[0m[32;1m([0m[38;2;255;165;0;1mbuf[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m;
    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1 || '[38;2;0;100;100;1m}[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        *[38;2;255;165;0;1mto[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mfrom[0m;
        [38;2;0;175;175;1mreturn[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mind[0m [38;2;0;100;250;1m+=[0m 1; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1moffset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mind[0m;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1 && '[38;2;0;100;100;1m}[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m[32;1m)[0m 
        [32;1m([0m[38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1moffset[0m[31;1m][0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m, [38;2;255;165;0;1mind[0m [38;2;0;100;250;1m+=[0m 1[32;1m)[0m;
    [38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1moffset[0m[31;1m][0m[38;2;0;100;250;1m =[0m '\0';
    [38;2;255;50;0;1mif[0m[32;1m([0m0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mind[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1moffset[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0 [38;2;0;100;250;1m!=[0m [32;1m([0m*[38;2;255;165;0;1mto[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1matoi[0m[32;1m([0m[38;2;255;165;0;1mbuf[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_expand_root_at_end_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1m_regex_string_segment_t[0m *[38;2;255;165;0;1mcurrent[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mnext_start[0m, [38;2;50;175;0;1msize_t[0m *[38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m![38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"$"[0m, *[38;2;255;165;0;1mcurrent[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m [38;2;100;100;100;1m// if NOT rooted to the end
[0m        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, *[38;2;255;165;0;1mnext_start[0m, *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;50;0;1m_regex_add_all_alphabet_transitions_between[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m1, *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;50;0;1mnfa_add_epsilon_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m1, *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m2[32;1m)[0m;
        *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mnext_start[0m[38;2;0;100;250;1m + [0m2;
        *[38;2;255;165;0;1mend[0m[38;2;0;100;250;1m =[0m *[38;2;255;165;0;1mnext_start[0m;
    [38;2;0;100;100;1m}[0m
[38;2;0;100;100;1m}[0m


[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_is_special_character[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mrss[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;0;175;175;1mreturn[0m [38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"*"[0m, [38;2;255;165;0;1mrss[0m[32;1m)[0m || [38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"?"[0m, [38;2;255;165;0;1mrss[0m[32;1m)[0m
            || [38;2;255;50;0;1m_regex_string_segment_equals[0m[32;1m([0m[34;1m"+"[0m, [38;2;255;165;0;1mrss[0m[32;1m)[0m
            || [32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m && '[38;2;0;100;100;1m{[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m0[31;1m][0m && '[38;2;0;100;100;1m}[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[32;1m)[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_expand_token[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;50;175;0;1mconst char[0m* [38;2;255;165;0;1mraw_regex[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mif[0m[32;1m([0m0[38;2;0;100;250;1m >[0m= [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"Invalid regex_segment size."[0m[32;1m)[0m;
    [38;2;255;165;0;1mif[0m [32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex_size[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m0[31;1m][0m, [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1;
    [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m2[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex_size[0m && '\\'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m0[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mif[0m[32;1m([0m'[38;2;255;165;0;1mn[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m[32;1m)[0m
            [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, '\[38;2;255;165;0;1mn[0m', [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;165;0;1melse[0m [38;2;255;50;0;1mif[0m[32;1m([0m'[38;2;255;165;0;1mr[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m[32;1m)[0m
            [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, '\[38;2;255;165;0;1mr[0m', [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;165;0;1melse[0m [38;2;255;50;0;1mif[0m[32;1m([0m'[38;2;255;165;0;1mt[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m[32;1m)[0m
            [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, '\[38;2;255;165;0;1mt[0m', [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;255;165;0;1melse[0m
            [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m, [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1;
    [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[32;1m([0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m0[31;1m][0m && '[32;1m)[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;0;175;175;1mreturn[0m [38;2;255;50;0;1m_regex_parse[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, &[38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m, [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m2[32;1m)[0m;
    [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[31;1m[[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m0[31;1m][0m && '[31;1m][0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart_index[0m[38;2;0;100;250;1m =[0m 1;
        [38;2;50;175;0;1mchar[0m [38;2;255;165;0;1minverted_flag[0m[38;2;0;100;250;1m =[0m 0;
        [38;2;255;50;0;1mif[0m[32;1m([0m'^'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m1[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mstart_index[0m[38;2;0;100;250;1m =[0m 2;
            [38;2;255;165;0;1minverted_flag[0m[38;2;0;100;250;1m =[0m 1;
            [38;2;255;50;0;1m_regex_add_all_alphabet_transitions_between[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;0;100;100;1m}[0m
        [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mind[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mstart_index[0m; [38;2;255;165;0;1mind[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;250;1m - [0m1; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mind[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1minverted_flag[0m ? [38;2;255;50;0;1mnfa_remove_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m, [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m : 
                            [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mbegin_expansion_state[0m, [38;2;255;165;0;1mraw_regex[0m[31;1m[[0m[38;2;255;165;0;1mind[0m[31;1m][0m, [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m;
        [38;2;0;100;100;1m}[0m
        [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mbegin_expansion_state[0m[38;2;0;100;250;1m + [0m1;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mraw_regex[0m, [38;2;255;165;0;1mraw_regex_size[0m[38;2;0;100;100;1m}[0m;
    [38;2;255;50;0;1m_debug_print_regex_string_segment_t[0m[32;1m([0m[38;2;255;165;0;1mrss[0m[32;1m)[0m;
    [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"Invalid regex format."[0m[32;1m)[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_add_all_alphabet_transitions_between[0m[32;1m([0m[38;2;255;50;0;1mNfa[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m, [38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mnfa[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstate[0m1, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstate[0m2[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1malphabet_chars[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mset_get_list[0m[32;1m([0m[38;2;255;165;0;1malphabet[0m[32;1m)[0m;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m0[38;2;0;100;250;1m <[0m [38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1malphabet_chars[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mnfa_add_transition[0m[32;1m([0m[38;2;255;165;0;1mnfa[0m, [38;2;255;165;0;1mstate[0m1, [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1malphabet_chars[0m[32;1m)[0m, [38;2;255;165;0;1mstate[0m2[32;1m)[0m;
        [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1malphabet_chars[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1malphabet_chars[0m[32;1m)[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m/* Invariant: the size of the list that is returned is at least 1. */[0m
[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_split_by_tokens[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mptr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m *[38;2;255;165;0;1mtokens[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mparen_level[0m[38;2;0;100;250;1m =[0m 0; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mbracket_level[0m[38;2;0;100;250;1m =[0m 0; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mcurly_bracket_level[0m[38;2;0;100;250;1m =[0m 0;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m 0;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1msize[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;165;0;1mif[0m [32;1m([0m'\\'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mbracket_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mi[0m [38;2;0;100;250;1m+=[0m 1;
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m+1[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[32;1m([0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && '[32;1m)[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m
            && '[31;1m[[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && '[31;1m][0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mbracket_level[0m
            && '[38;2;0;100;100;1m{[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && '[38;2;0;100;100;1m}[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mcurly_bracket_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m+1[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[31;1m[[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mif[0m [32;1m([0m0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mbracket_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
                [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m;
                [38;2;255;165;0;1mbracket_level[0m [38;2;0;100;250;1m+=[0m 1;
            [38;2;0;100;100;1m}[0m
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[32;1m([0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mif[0m [32;1m([0m0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m
                [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m;
            [38;2;255;165;0;1mparen_level[0m [38;2;0;100;250;1m+=[0m 1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[31;1m][0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 1[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mbracket_level[0m && '[31;1m[[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m-1[31;1m][0m \
            && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mbracket_level[0m [38;2;0;100;250;1m-=[0m 1;
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m+1[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[32;1m)[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 1[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mparen_level[0m [38;2;0;100;250;1m-=[0m 1;
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m+1[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[31;1m][0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mif[0m [32;1m([0m'[31;1m[[0m' [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m-1[31;1m][0m[32;1m)[0m
                [38;2;255;165;0;1mbracket_level[0m [38;2;0;100;250;1m-=[0m 1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[32;1m)[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mparen_level[0m [38;2;0;100;250;1m-=[0m 1;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[38;2;0;100;100;1m{[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mcurly_bracket_level[0m [38;2;0;100;250;1m+=[0m 1;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m;
        [38;2;0;100;100;1m}[0m [38;2;255;165;0;1melse[0m [38;2;255;165;0;1mif[0m [32;1m([0m'[38;2;0;100;100;1m}[0m'[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m && 0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mparen_level[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mcurly_bracket_level[0m [38;2;0;100;250;1m-=[0m 1;
            [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1mi[0m+1[32;1m)[0m[32;1m)[0m;
            [38;2;255;165;0;1mcapture_group_begin_offset[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1;
        [38;2;0;100;100;1m}[0m
        [38;2;100;100;100;1m// if (1 < bracket_level || 0 > bracket_level
[0m        [38;2;100;100;100;1m//     || 0 > paren_level
[0m        [38;2;100;100;100;1m//     || 1 < curly_bracket_level || 0 > curly_bracket_level)
[0m        [38;2;100;100;100;1m//     assert(0 == "Incorrectly formatted regex.");
[0m    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mif[0m [32;1m([0m0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mparen_level[0m || 0 [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mbracket_level[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"Incorrectly formatted regex."[0m[32;1m)[0m;
    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1msize[0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mcapture_group_begin_offset[0m[32;1m)[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mtokens[0m, [38;2;255;50;0;1m_regex_string_segment_from[0m[32;1m([0m[38;2;255;165;0;1mptr[0m, [38;2;255;165;0;1mcapture_group_begin_offset[0m, [38;2;255;165;0;1msize[0m[32;1m)[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mtokens[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1msize_t[0m [38;2;255;50;0;1m_regex_run[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mstr[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;165;0;1mCOMPILED[0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mstate[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"A regex cannot be run without first being compiled."[0m[32;1m)[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1msize[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m, [38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1maccept_flag[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m;
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1maccept_flag[0m;
[38;2;0;100;100;1m}[0m

[38;2;100;100;100;1m// LINEAR SCAN VERSION: [start, end)
[0m[38;2;255;165;0;1m_regex_match_t[0m [38;2;255;50;0;1m_regex_find_left_most_match_linear_scan[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mstr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1mconst[0m [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1minv_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m-1,-1[38;2;0;100;100;1m}[0m;
    [38;2;255;165;0;1mconst[0m [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1mzero_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mstart[0m, 0[38;2;0;100;100;1m}[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m -1;
    [38;2;255;165;0;1mif[0m [32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m
        [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mzero_match[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mstart[0m; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mend[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m, [38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m;
        [38;2;255;50;0;1mif[0m[32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m; [38;2;100;100;100;1m// Indicates a match within [start, i].
[0m            [38;2;255;165;0;1mbreak[0m;
        [38;2;0;100;100;1m}[0m
    [38;2;0;100;100;1m}[0m
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m;

    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m= -1[32;1m)[0m [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1minv_match[0m;

    [38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m -1;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mright_bound[0m; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m >[0m= [38;2;255;165;0;1mstart[0m; [38;2;0;100;250;1m--[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_front[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m, [38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m; [38;2;100;100;100;1m// PUSH FRONT!
[0m        [38;2;255;50;0;1mif[0m[32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m;
            [38;2;255;165;0;1mbreak[0m;
        [38;2;0;100;100;1m}[0m
    [38;2;0;100;100;1m}[0m
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m;

    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m= -1[32;1m)[0m [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1minv_match[0m;

    [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1mleftmost_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mleft_bound[0m, [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m + [0m1[38;2;0;100;100;1m}[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mleftmost_match[0m;
[38;2;0;100;100;1m}[0m

[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_construct_list_with_interval[0m[32;1m([0m[38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mstr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mstart[0m; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mend[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m, [38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mstr_list[0m;
[38;2;0;100;100;1m}[0m


[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_get_mids[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m *[38;2;255;165;0;1mmids[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1msize[0m[38;2;0;100;250;1m - [0m1; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mmids[0m, [32;1m([0m[32;1m([0m[38;2;255;165;0;1msize[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mi[0m[38;2;0;100;250;1m - [0m1[32;1m)[0m * [38;2;255;165;0;1mstart[0m[38;2;0;100;250;1m + [0m[32;1m([0m[38;2;255;165;0;1mi[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m * [38;2;255;165;0;1mend[0m[32;1m)[0m / [38;2;255;165;0;1msize[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mmids[0m;
[38;2;0;100;100;1m}[0m

[38;2;255;165;0;1m_regex_match_t[0m [38;2;255;50;0;1m_regex_find_left_most_match_binary_search[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mstr[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mstart[0m, [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mend[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;165;0;1mconst[0m [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1minv_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m-1,-1[38;2;0;100;100;1m}[0m;
    [38;2;255;165;0;1mconst[0m [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1mzero_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mstart[0m, 0[38;2;0;100;100;1m}[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mend[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mstr_list[0m;

    [38;2;100;100;100;1m// Binary search for right_bound where: [start, right_bound) == 0
[0m    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mleft[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mstart[0m; [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mright[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mright_bound[0m;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m1[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mright[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mleft[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1moptimal_size[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mmax[0m[32;1m([0m2, [32;1m([0m[38;2;255;165;0;1mright[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mleft[0m[32;1m)[0m / [38;2;255;165;0;1mCHUNK_SIZE[0m[32;1m)[0m;
        [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m[32;1m)[0m *[38;2;255;165;0;1mmids[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_get_mids[0m[32;1m([0m[38;2;255;165;0;1moptimal_size[0m, [38;2;255;165;0;1mleft[0m, [38;2;255;165;0;1mright[0m[32;1m)[0m;
        [38;2;0;175;175;1mwhile[0m[32;1m([0m[38;2;255;50;0;1mlist_size[0m[32;1m([0m[38;2;255;165;0;1mmids[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mmid[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_get_front[0m[32;1m([0m[38;2;255;165;0;1mmids[0m[32;1m)[0m; [38;2;255;50;0;1mlist_pop_front[0m[32;1m([0m[38;2;255;165;0;1mmids[0m[32;1m)[0m;
            [38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_construct_list_with_interval[0m[32;1m([0m[38;2;255;165;0;1mstr[0m, [38;2;255;165;0;1mstart[0m, [38;2;255;165;0;1mmid[0m[32;1m)[0m;
            [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mresult[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m;
            0[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mresult[0m ? [32;1m([0m[38;2;255;165;0;1mleft[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mmid[0m[32;1m)[0m : [32;1m([0m[38;2;255;165;0;1mright[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mmid[0m[32;1m)[0m;
            [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m;
            [38;2;255;165;0;1mif[0m [32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mresult[0m[32;1m)[0m
                [38;2;255;165;0;1mbreak[0m;
        [38;2;0;100;100;1m}[0m
        [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mmids[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mleft[0m;

    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m= -1 || [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m =[0m= [38;2;255;165;0;1mend[0m[38;2;0;100;250;1m - [0m1[32;1m)[0m [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1minv_match[0m;

    [38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m -1;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mright_bound[0m; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m >[0m= [38;2;255;165;0;1mstart[0m; [38;2;0;100;250;1m--[0m[38;2;255;165;0;1mi[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
        [38;2;255;50;0;1mlist_push_front[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m, [38;2;255;165;0;1mstr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[32;1m)[0m; [38;2;100;100;100;1m// PUSH FRONT!
[0m        [38;2;255;50;0;1mif[0m[32;1m([0m1[38;2;0;100;250;1m =[0m= [38;2;255;50;0;1mcall[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m, [38;2;255;50;0;1mlist_get_iterator[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m[32;1m)[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
            [38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mi[0m;
            [38;2;255;165;0;1mbreak[0m;
        [38;2;0;100;100;1m}[0m
    [38;2;0;100;100;1m}[0m
    [38;2;255;50;0;1mlist_free[0m[32;1m([0m[38;2;255;165;0;1mstr_list[0m[32;1m)[0m;

    [38;2;255;165;0;1mif[0m [32;1m([0m[38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m =[0m= -1[32;1m)[0m [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1minv_match[0m;

    [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1mleftmost_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m[38;2;255;165;0;1mleft_bound[0m, [38;2;255;165;0;1mright_bound[0m[38;2;0;100;250;1m - [0m[38;2;255;165;0;1mleft_bound[0m[38;2;0;100;250;1m + [0m1[38;2;0;100;100;1m}[0m;
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mleftmost_match[0m;
[38;2;0;100;100;1m}[0m

[38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_match_t[0m[32;1m)[0m* [38;2;255;50;0;1m_regex_find_all_regex_matches_linear[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m, [38;2;50;175;0;1mconst char[0m *[38;2;255;165;0;1mstr[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;165;0;1mCOMPILED[0m [38;2;0;100;250;1m!=[0m [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mstate[0m[32;1m)[0m
        [38;2;255;50;0;1massert[0m[32;1m([0m0[38;2;0;100;250;1m =[0m= [34;1m"A regex cannot be run without first being compiled."[0m[32;1m)[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;255;165;0;1m_regex_match_t[0m[32;1m)[0m *[38;2;255;165;0;1mmatches[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;255;165;0;1m_regex_match_t[0m[32;1m)[0m;
    [38;2;255;50;0;1mList[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m *[38;2;255;165;0;1mstr_list[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mlist_new[0m[32;1m([0m[38;2;50;175;0;1mchar[0m[32;1m)[0m;
    [38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1msize[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1mstrlen[0m[32;1m([0m[38;2;255;165;0;1mstr[0m[32;1m)[0m;
    [38;2;255;165;0;1m_regex_match_t[0m [38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m0, 0[38;2;0;100;100;1m}[0m;
    [38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_find_left_most_match_binary_search[0m[32;1m([0m[38;2;255;165;0;1mregex[0m, [38;2;255;165;0;1mstr[0m, 0, [38;2;255;165;0;1msize[0m[32;1m)[0m;
    [38;2;0;175;175;1mwhile[0m[32;1m([0m[38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mbegin[0m [38;2;0;100;250;1m!=[0m -1 && [38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m [38;2;0;100;250;1m!=[0m -1[32;1m)[0m [38;2;0;100;100;1m{[0m [38;2;100;100;100;1m// a -1 for both start and end indicates a non-match
[0m        [38;2;255;50;0;1mlist_push_back[0m[32;1m([0m[38;2;255;165;0;1mmatches[0m, [38;2;255;165;0;1mnext_match[0m[32;1m)[0m;
        [38;2;255;50;0;1mif[0m[32;1m([0m[38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[38;2;0;100;250;1m =[0m= 0[32;1m)[0m [38;2;100;100;100;1m// break if it is a zero length match
[0m            [38;2;255;165;0;1mbreak[0m;
        [38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m =[0m [38;2;255;50;0;1m_regex_find_left_most_match_binary_search[0m[32;1m([0m[38;2;255;165;0;1mregex[0m, [38;2;255;165;0;1mstr[0m, [38;2;255;165;0;1mnext_match[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mbegin[0m[38;2;0;100;250;1m + [0m1, [38;2;255;165;0;1msize[0m[32;1m)[0m;
    [38;2;0;100;100;1m}[0m
    [38;2;0;175;175;1mreturn[0m [38;2;255;165;0;1mmatches[0m;
[38;2;0;100;100;1m}[0m

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_regex_destroy[0m[32;1m([0m[38;2;255;165;0;1m_regex_t[0m *[38;2;255;165;0;1mregex[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;255;50;0;1mfree[0m[32;1m([0m[32;1m([0m[38;2;50;175;0;1mvoid[0m*[32;1m)[0m [38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mraw_regex[0m[32;1m)[0m;
    [38;2;255;50;0;1mnfa_free[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mnfa[0m[32;1m)[0m;
    [38;2;255;50;0;1mfdfa_free[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[38;2;0;100;250;1m->[0m[38;2;255;165;0;1mfdfa[0m[32;1m)[0m;
    [38;2;255;50;0;1mfree[0m[32;1m([0m[38;2;255;165;0;1mregex[0m[32;1m)[0m;
[38;2;0;100;100;1m}[0m

[38;2;255;165;0;1m_regex_fns_t[0m [38;2;255;165;0;1m_regex_fn_impl_[0m[38;2;0;100;250;1m =[0m [38;2;0;100;100;1m{[0m
    &[38;2;255;165;0;1m_regex_from[0m,
    &[38;2;255;165;0;1m_regex_compile[0m,
    &[38;2;255;165;0;1m_regex_run[0m,
    &[38;2;255;165;0;1m_regex_find_all_regex_matches_linear[0m,
    &[38;2;255;165;0;1m_regex_destroy[0m
[38;2;0;100;100;1m}[0m;

[38;2;50;175;0;1mvoid[0m [38;2;255;50;0;1m_debug_print_regex_string_segment_t[0m[32;1m([0m[38;2;255;165;0;1m_regex_string_segment_t[0m [38;2;255;165;0;1mrss[0m[32;1m)[0m [38;2;0;100;100;1m{[0m
    [38;2;50;175;0;1mchar[0m *[38;2;255;165;0;1mbuf[0m[38;2;0;100;250;1m =[0m [32;1m([0m[38;2;50;175;0;1mchar[0m*[32;1m)[0m [32;1m([0m[38;2;255;50;0;1mmalloc[0m[32;1m([0m[38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[38;2;0;100;250;1m + [0m1[32;1m)[0m[32;1m)[0m;
    [38;2;0;175;175;1mfor[0m[32;1m([0m[38;2;50;175;0;1msize_t[0m [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m =[0m 0; [38;2;255;165;0;1mi[0m[38;2;0;100;250;1m <[0m [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m; [38;2;0;100;250;1m++[0m[38;2;255;165;0;1mi[0m[32;1m)[0m
        [38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m[38;2;0;100;250;1m =[0m [38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mptr[0m[31;1m[[0m[38;2;255;165;0;1mi[0m[31;1m][0m;
    [38;2;255;165;0;1mbuf[0m[31;1m[[0m[38;2;255;165;0;1mrss[0m[38;2;0;100;250;1m.[0m[38;2;255;165;0;1mlength[0m[31;1m][0m[38;2;0;100;250;1m =[0m '\0';
    [38;2;100;100;100;1m// printf("String Segment: \"%s\"\n", buf);
[0m    [38;2;255;50;0;1mfree[0m[32;1m([0m[38;2;255;165;0;1mbuf[0m[32;1m)[0m;
}
tokens left: 0, num_discarded: 3414